<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Async</title>
</head>

<!--<body onload="readFile()">-->
<body>

<div id="demo"></div>

<script>
    'use strict';

    // liest die gewünschte Datei aus dem Verzeichnis 'txt' aus
    // gibt im Fehlerfall 'err' aus
    // gibt im Erfolgsfall (null, responseText) aus
    function readFile(fileName, callback) {
        // Listener erstellen
        const xhttp = new XMLHttpRequest();
        xhttp.onload = function () {
            if (this.responseText.substring(0, 5) === "Error") {
                // Antwort im Fehlerfall
                callback(this.responseText);
            } else
                // Antwort mit den gewünschten Daten (Text in auslesen.txt)
                callback(null, this.responseText);
            document.querySelector("#demo").innerHTML = this.responseText;
        }

        // Anfrage formulieren
        xhttp.open("POST", "readFile.php");
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        // Anfrage abschicken
        xhttp.send("fileName=" + fileName);
    }

    // kopiert ein File und pasted sie unter einem neuen Namen
    // @todo Datei schreiben fehlt noch
    const copyFile = function (fileName, newFileName, callback) {
        readFile(fileName, (err, data) => {
            if (err) {
                callback(err);
            }
            return callback(null);
        })
    }

    copyFile("auslesen.txt", "kopieren.txt", err => {
        if (err) console.log(err);
    });

</script>

</body>
</html>